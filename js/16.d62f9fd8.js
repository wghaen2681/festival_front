(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"0fa9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row q-my-xl q-pt-xl justify-center"},[a("q-table",{staticStyle:{width:"55vw"},attrs:{title:"文章資料",data:t.articles,columns:t.columns,"row-key":"name"},on:{"row-dblclick":t.getArticleDetail}})],1),t.ArticleDetails.title?a("div",{staticClass:"row q-mb-lg justify-center"},[t._m(0),a("div",{staticClass:"col-12 flex justify-center"},[a("div",{staticClass:"row",staticStyle:{width:"55vw"}},[a("div",{staticClass:"col q-ml-sm q-mr-xl"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.ArticleDetails.image}})]),a("div",{staticClass:"col",staticStyle:{"font-size":"1.5rem"}},[a("div",{staticClass:"row"},[t._v(t._s(t.ArticleDetails.title))]),a("div",{staticClass:"row q-my-md",staticStyle:{"font-size":"1rem"}},[t._v("內容："+t._s(t.ArticleDetails.content))]),a("div",{staticClass:"row q-my-md",staticStyle:{"font-size":"1rem"}},[t._v("資訊："+t._s(t.ArticleDetails.information))]),a("div",{staticClass:"row q-my-md",staticStyle:{"font-size":"1rem"}},[t._v("作者："+t._s(t.ArticleDetails.author))]),a("div",{staticClass:"row q-my-md",staticStyle:{"font-size":"1rem"}},[t._v("日期："+t._s(t.ArticleDetails.date))]),a("div",{staticClass:"row q-my-md",staticStyle:{"font-size":"1rem"}},[t._v("節慶："+t._s(t.ArticleDetails.festival))])])])]),a("div",{staticClass:"col-12 q-my-lg text-center"},[a("q-btn",{staticClass:"text-primary",attrs:{flat:""},on:{click:t.editArticle}},[t._v("編輯文章")])],1)]):t._e(),a("q-dialog",{attrs:{id:"add_festival"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[a("q-card",{staticClass:"q-pa-md"},[a("q-card-section",{staticClass:"q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("編輯文章")])]),a("q-card-section",{staticClass:"q-pb-lg"},[a("q-input",{attrs:{label:"文章標題"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),a("q-input",{attrs:{label:"文章日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),a("q-input",{attrs:{label:"文章內容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),a("q-input",{attrs:{label:"文章資訊"},model:{value:t.form.information,callback:function(e){t.$set(t.form,"information",e)},expression:"form.information"}}),a("q-input",{attrs:{label:"文章作者"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}}),a("q-select",{attrs:{label:"文章節慶",options:t.options},model:{value:t.form.festival,callback:function(e){t.$set(t.form,"festival",e)},expression:"form.festival"}})],1),a("q-card-section",[a("img-inputer",{staticStyle:{width:"100%"},attrs:{"img-src":t.form.image,theme:"dark",size:"large",placeholder:"點擊或拖曳選擇圖片","bottom-text":"點擊或拖曳以修改"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),a("q-card-actions",{staticClass:"justify-around"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-negative",staticStyle:{width:"80px"},attrs:{label:"下架",flat:""},on:{click:t.resetForm}}),t._e(),a("q-btn",{staticClass:"text-dark",staticStyle:{width:"80px"},attrs:{label:"取消",flat:""},on:{click:t.resetForm}}),a("q-btn",{staticClass:"text-primary",staticStyle:{width:"80px"},attrs:{flat:"",label:"確認"},on:{click:t.submitModal}})],1)],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("hr",{staticClass:"q-mt-none q-mb-xl",staticStyle:{width:"55vw"}})])}],l=a("758b"),r={data(){return{columns:[{name:"title",align:"left",label:"標題",field:"title",sortable:!0},{name:"author",align:"left",label:"作者",field:"author",sortable:!0},{name:"date",align:"left",label:"日期",field:"date",sortable:!0},{name:"festival",align:"left",label:"節慶",field:"festival",sortable:!0}],articles:[],alert:!1,confirm:!1,prompt:!1,address:"",submitDisable:!1,form:{image:"",date:"",title:"",content:"",information:"",author:"",festival:"",_id:""},ArticleDetails:{image:"",date:"",title:"",content:"",information:"",author:"",festival:"",index:""}}},methods:{editArticle(t){this.form={image:this.ArticleDetails.image,title:this.ArticleDetails.title,date:this.ArticleDetails.date,content:this.ArticleDetails.content,information:this.ArticleDetails.information,author:this.ArticleDetails.author,festival:this.ArticleDetails.festival,index:t},this.alert=!0},resetForm(t){this.submitDisable?t.preventDefault():(this.alert=!1,this.form={image:"",date:"",title:"",content:"",information:"",author:"",festival:"",_id:""})},async getArticleDetail(t,e,a){try{const{data:t}=await l["a"].get("/articles/"+this.articles[a]._id);t.result.image&&(t.result.image=`https://festivalsweb.herokuapp.com/files/${t.result.image}`),t.result.date=new Date(t.result.date).toLocaleDateString(),t.result.index=a,t.result.festival=t.result.festival.title,this.ArticleDetails=t.result}catch(i){this.$swal({icon:"error",title:"取得指定節慶錯誤",text:i.response.data.message})}}},async mounted(){try{const{data:t}=await l["a"].get("/articles/all",{headers:{authorization:"Bearer "+this.$store.state.user.jwt.token}});this.articles=t.result.map((t=>(t.image&&(t.image=`https://festivalsweb.herokuapp.com/files/${t.image}`),t.date=new Date(t.date).toLocaleDateString(),t.festival=t.festival.title,t)))}catch(t){this.$swal({icon:"error",title:"錯誤",text:"取得文章失敗"})}}},o=r,c=a("2877"),n=a("eaac"),m=a("9c40"),d=a("24e8"),f=a("f09f"),u=a("a370"),v=a("27f9"),h=a("ddd8"),p=a("4b7e"),b=a("7f67"),w=a("eebe"),g=a.n(w),q=Object(c["a"])(o,i,s,!1,null,null,null);e["default"]=q.exports;g()(q,"components",{QTable:n["a"],QBtn:m["a"],QDialog:d["a"],QCard:f["a"],QCardSection:u["a"],QInput:v["a"],QSelect:h["a"],QCardActions:p["a"]}),g()(q,"directives",{ClosePopup:b["a"]})}}]);