(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{ad2f:function(e,t,s){"use strict";s.r(t);var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row q-pt-xl q-mt-xl justify-center"},[s("q-table",{staticStyle:{width:"55vw"},attrs:{title:"會員資料",data:e.users,columns:e.columns,"row-key":"name"},on:{"row-dblclick":e.getUserDetail},scopedSlots:e._u([{key:"header-selection",fn:function(t){return[s("q-toggle",{model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"scope.selected"}})]}},{key:"body-selection",fn:function(t){return[s("q-toggle",{model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"scope.selected"}})]}}])})],1),e.UserDetails.account?s("div",{staticClass:"row justify-center"},[e._m(0)]):e._e(),e.UserDetails.account?s("div",{staticClass:"row q-mb-xl q-pb-md"},[e._m(1),s("div",{staticClass:"col q-ml-md column items-start"},[s("div",{staticClass:"q-mt-none q-mb-md",staticStyle:{"font-size":"1rem"}},[e._v(e._s(e.UserDetails.account))]),s("div",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem"}},[e._v(e._s(e.UserDetails.password))]),s("div",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem"}},[e._v(e._s(e.UserDetails.name))]),s("a",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem","text-decoration":"none"},attrs:{href:"mailto:"+e.UserDetails.email}},[e._v(e._s(e.UserDetails.email))]),s("q-select",{attrs:{label:"選擇身份別",options:e.options},on:{input:e.changeRole},model:{value:e.UserDetails.role,callback:function(t){e.$set(e.UserDetails,"role",t)},expression:"UserDetails.role"}})],1)]):e._e()])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("hr",{staticClass:"q-my-xl",staticStyle:{width:"55vw"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-5 q-mr-md column items-end"},[s("div",{staticClass:"q-mt-none q-mb-md",staticStyle:{"font-size":"1rem"}},[e._v("帳號：")]),s("div",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem"}},[e._v("密碼：")]),s("div",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem"}},[e._v("姓名：")]),s("div",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem"}},[e._v("電子郵件：")]),s("div",{staticClass:"q-my-md",staticStyle:{"font-size":"1rem"}},[e._v("身份別：")])])}],i=s("758b"),o={data(){return{columns:[{name:"name",required:!0,label:"姓名",align:"left",field:"name",sortable:!0},{name:"account",align:"left",label:"帳號",field:"account",sortable:!0},{name:"email",align:"left",label:"電子郵件",field:"email"},{name:"role",align:"left",label:"角色",field:"role",sortable:!0}],users:[],UserDetails:[],options:[{label:"使用者",value:0},{label:"管理員",value:1}]}},methods:{async getUserDetail(e,t,s){try{const{data:e}=await i["a"].get("/users/"+this.users[s]._id);console.log(e.result),0===e.result.role?e.result.role={label:"使用者",value:0}:e.result.role={label:"管理員",value:1},this.UserDetails=e.result}catch(l){this.$swal({icon:"error",title:"取得指定用戶錯誤",text:l.response.data.message})}},async changeRole(){const e=new FormData;for(const t in this.form)e.append(t,this.form[t])}},async mounted(){try{const{data:e}=await i["a"].get("/users/all");this.users=e.result.map((e=>(e.image&&(e.image=`https://festivalsweb.herokuapp.com/files/${e.image}`),0===e.role?e.role="使用者":1===e.role&&(e.role="管理員"),e)))}catch(e){this.$swal({icon:"error",title:"錯誤",text:"取得會員失敗"})}}},n=o,c=s("2877"),r=s("eaac"),m=s("9564"),d=s("ddd8"),u=s("eebe"),f=s.n(u),v=Object(c["a"])(n,l,a,!1,null,null,null);t["default"]=v.exports;f()(v,"components",{QTable:r["a"],QToggle:m["a"],QSelect:d["a"]})}}]);